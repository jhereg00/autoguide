{% macro header (el) %}
  <header class="ag-section__header">
    {% if el.filePath %}
      <p class="file-path">{{ el.filePath | join('/') }}</p>
    {% endif %}

    {% if el.depth %}
      <h{{ el.depth }}>{{ el.title | title }}</h{{ el.depth }}>
    {% else %}
      <h1>{{ el.title | title }}</h1>
    {% endif %}
  </header>
{% endmacro %}

{% macro code (content) %}
  <h4 class="ag-component-header dev-only">Code</h4>
  <pre class="ag-component ag-component--code"><code>
{%- raw -%}
{{ content }}
{%- raw -%}
  </code></pre>
{% endmacro %}

{% macro htmlSample (title, description, content, fullWidth) %}
  <div class="ag-section__inner">
    <h4 class="ag-component-header">{{ title }}</h4>
    {% if description %}
      <div class="ag-description">{{ description | markdown | safe }}</div>
    {% endif %}
  </div>
  <make-iframe class="ag-component ag-component--html {% if fullWidth %}fs{% endif %}">
    {{ content | safe }}
  </make-iframe>
{% endmacro %}

{% macro html (el, fullWidth) %}
  {% if el.modifier | length %}
    {% if el.default | length %}
      {{ htmlSample (el.default[0].name, el.default[0].description, el.html, fullWidth) }}
    {% else %}
      {{ htmlSample ("Default", null, el.html, fullWidth) }}
    {% endif %}
    {% for mod in el.modifier %}
      {{ htmlSample (mod.name, mod.description, el.html | addModifier(mod.name), fullWidth) }}
    {% endfor %}
  {% else %}
    {{ htmlSample ("Sample", null, el.html, fullWidth) }}
  {% endif %}
  <div class="ag-section__inner">
    {{ code(el.html) }}
  </div>
{% endmacro %}

{% macro params (params) %}
  <div class="ag-component--params">
    <h4 class="ag-component-header">Parameters</h4>
    {% for param in params %}
      <div class="ag-param">
        {% if param.type %}
          <span class="ag-param__type">{{ param.type }}</span>
        {% endif %}
        {% if param.name %}
          <span class="ag-param__name">{{ param.name }}</span>
        {% endif %}
        {% if param.description %}
          <div class="ag-param__description ag-description">{{ param.description | markdown | safe }}</div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
{% endmacro %}
